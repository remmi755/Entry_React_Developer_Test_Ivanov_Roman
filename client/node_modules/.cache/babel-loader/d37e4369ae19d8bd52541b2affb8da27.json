{"ast":null,"code":"import _objectSpread from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";import{getCartFromLS}from\"./getCartFromLs\";var initialState={cartList:getCartFromLS(),count:1};export var cartListSlice=createSlice({name:\"cartList\",initialState:initialState,reducers:{setCartList:function setCartList(state,action){state.cartList=action.payload;},countIncrease:function countIncrease(state,action){var newProductChanged=_objectSpread(_objectSpread({},action.payload),{},{count:action.payload.count+1});state.cartList.forEach(function(el,index){if(el.activeAttributeItem.id===action.payload.activeAttributeItem.id){state.cartList[index]=newProductChanged;}});localStorage.setItem(\"cart\",JSON.stringify(state.cartList));},countDecrease:function countDecrease(state,action){if(action.payload.count-1>0){var newProductChanged=_objectSpread(_objectSpread({},action.payload),{},{count:action.payload.count-1});state.cartList.forEach(function(el,index){if(el.activeAttributeItem.id===action.payload.activeAttributeItem.id){state.cartList[index]=newProductChanged;}});localStorage.setItem(\"cart\",JSON.stringify(state.cartList));}else{state.cartList=state.cartList.filter(function(item){return item.activeAttributeItem.id!==action.payload.activeAttributeItem.id;});localStorage.setItem(\"cart\",JSON.stringify(state.cartList));};}}});var _cartListSlice$action=cartListSlice.actions,setCartList=_cartListSlice$action.setCartList,countDecrease=_cartListSlice$action.countDecrease,countIncrease=_cartListSlice$action.countIncrease;export{setCartList,countDecrease,countIncrease};export default cartListSlice.reducer;","map":{"version":3,"names":["createSlice","getCartFromLS","initialState","cartList","count","cartListSlice","name","reducers","setCartList","state","action","payload","countIncrease","newProductChanged","forEach","el","index","activeAttributeItem","id","localStorage","setItem","JSON","stringify","countDecrease","filter","item","actions","reducer"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/redux/cartList/slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport {getCartFromLS} from \"./getCartFromLs\";\r\n\r\nconst initialState = {\r\n  cartList: getCartFromLS(),\r\n  count: 1,\r\n};\r\n\r\nexport const cartListSlice = createSlice({\r\n  name: \"cartList\",\r\n  initialState,\r\n  reducers: {\r\n    setCartList: (state, action) => {\r\n      state.cartList =  action.payload;\r\n    },\r\n\r\n    countIncrease: (state, action) => {\r\n      const newProductChanged = { ...action.payload, count: action.payload.count + 1};\r\n\r\n      state.cartList.forEach((el, index) => {\r\n        if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\r\n          state.cartList[index] = newProductChanged;\r\n        }\r\n      });\r\n      localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\r\n    },\r\n\r\n    countDecrease: (state, action) => {\r\n      if(action.payload.count - 1 > 0) {\r\n        const newProductChanged = { ...action.payload, count: action.payload.count - 1}\r\n        state.cartList.forEach((el, index) => {\r\n          if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\r\n            state.cartList[index] = newProductChanged;\r\n          }\r\n        });\r\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\r\n      } else {\r\n        state.cartList = state.cartList.filter((item) => item.activeAttributeItem.id !== action.payload.activeAttributeItem.id)\r\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList))\r\n      };\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setCartList, countDecrease, countIncrease } = cartListSlice.actions;\r\n\r\nexport default cartListSlice.reducer;\r\n"],"mappings":"2KAAA,OAASA,WAAT,KAA4B,kBAA5B,CAEA,OAAQC,aAAR,KAA4B,iBAA5B,CAEA,GAAMC,aAAY,CAAG,CACnBC,QAAQ,CAAEF,aAAa,EADJ,CAEnBG,KAAK,CAAE,CAFY,CAArB,CAKA,MAAO,IAAMC,cAAa,CAAGL,WAAW,CAAC,CACvCM,IAAI,CAAE,UADiC,CAEvCJ,YAAY,CAAZA,YAFuC,CAGvCK,QAAQ,CAAE,CACRC,WAAW,CAAE,qBAACC,KAAD,CAAQC,MAAR,CAAmB,CAC9BD,KAAK,CAACN,QAAN,CAAkBO,MAAM,CAACC,OAAzB,CACD,CAHO,CAKRC,aAAa,CAAE,uBAACH,KAAD,CAAQC,MAAR,CAAmB,CAChC,GAAMG,kBAAiB,gCAAQH,MAAM,CAACC,OAAf,MAAwBP,KAAK,CAAEM,MAAM,CAACC,OAAP,CAAeP,KAAf,CAAuB,CAAtD,EAAvB,CAEAK,KAAK,CAACN,QAAN,CAAeW,OAAf,CAAuB,SAACC,EAAD,CAAKC,KAAL,CAAe,CACpC,GAAID,EAAE,CAACE,mBAAH,CAAuBC,EAAvB,GAA8BR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAArE,CAAyE,CACvET,KAAK,CAACN,QAAN,CAAea,KAAf,EAAwBH,iBAAxB,CACD,CACF,CAJD,EAKAM,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B,EACD,CAdO,CAgBRoB,aAAa,CAAE,uBAACd,KAAD,CAAQC,MAAR,CAAmB,CAChC,GAAGA,MAAM,CAACC,OAAP,CAAeP,KAAf,CAAuB,CAAvB,CAA2B,CAA9B,CAAiC,CAC/B,GAAMS,kBAAiB,gCAAQH,MAAM,CAACC,OAAf,MAAwBP,KAAK,CAAEM,MAAM,CAACC,OAAP,CAAeP,KAAf,CAAuB,CAAtD,EAAvB,CACAK,KAAK,CAACN,QAAN,CAAeW,OAAf,CAAuB,SAACC,EAAD,CAAKC,KAAL,CAAe,CACpC,GAAID,EAAE,CAACE,mBAAH,CAAuBC,EAAvB,GAA8BR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAArE,CAAyE,CACvET,KAAK,CAACN,QAAN,CAAea,KAAf,EAAwBH,iBAAxB,CACD,CACF,CAJD,EAKAM,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B,EACD,CARD,IAQO,CACLM,KAAK,CAACN,QAAN,CAAiBM,KAAK,CAACN,QAAN,CAAeqB,MAAf,CAAsB,SAACC,IAAD,QAAUA,KAAI,CAACR,mBAAL,CAAyBC,EAAzB,GAAgCR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAA7E,EAAtB,CAAjB,CACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B,EACD,EACF,CA7BO,CAH6B,CAAD,CAAjC,CAoCA,0BAAsDE,aAAa,CAACqB,OAApE,CAAQlB,WAAR,uBAAQA,WAAR,CAAqBe,aAArB,uBAAqBA,aAArB,CAAoCX,aAApC,uBAAoCA,aAApC,C,gDAEP,cAAeP,cAAa,CAACsB,OAA7B"},"metadata":{},"sourceType":"module"}