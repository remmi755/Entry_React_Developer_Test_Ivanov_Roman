{"ast":null,"code":"import _regeneratorRuntime from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _objectSpread from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import styles from\"./Pdp.module.css\";import Title from\"../../components/Title\";import Button from\"../../components/Button\";import Image from\"../../components/Image\";import Attributes from\"../../components/Attributes\";import{useParams}from\"react-router-dom\";import{AppContext}from\"../../components/AppContext\";import{connect}from\"react-redux\";import{fetchProduct,onChangeImage}from\"../../redux/pdp/slice\";import{fetchAttributes,setActiveAttribute,setActiveAttributeIndex,setActiveAttributeItem,setAttributes}from\"../../redux/attributes/slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function withRouter(Children){return function(props){var match={params:useParams()};return/*#__PURE__*/_jsx(Children,_objectSpread(_objectSpread({},props),{},{match:match}));};}var PDP=/*#__PURE__*/function(_React$PureComponent){_inherits(PDP,_React$PureComponent);var _super=_createSuper(PDP);function PDP(props){var _this;_classCallCheck(this,PDP);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.renderPDP();case 2:_context.next=4;return _this.getAttributes();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.renderPDP=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var fetchProduct;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetchProduct=_this.props.fetchProduct;_context2.next=3;return fetchProduct(_this.cardId);case 3:case\"end\":return _context2.stop();}}},_callee2);}));_this.getAttributes=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var fetchAttributes;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetchAttributes=_this.props.fetchAttributes;_context3.next=3;return fetchAttributes(_this.cardId);case 3:case\"end\":return _context3.stop();}}},_callee3);}));_this.componentDidUpdate=function(prevProps){if(prevProps.product.attributes!==_this.props.product.attributes){_this.props.setActiveAttributeItem(\"\");_this.props.setActiveAttributeIndex(\"\");_this.props.setAttributes(_this.props.product.attributes);}};_this.cardId=_this.props.match.params[\"cardId\"].substring(1);return _this;}_createClass(PDP,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.setActiveAttributeItem(\"\");this.props.setActiveAttributeIndex(\"\");this.props.setActiveAttribute(\"\");}},{key:\"render\",value:function render(){var _this$props=this.props,currentImgId=_this$props.currentImgId,onChangeImage=_this$props.onChangeImage,product=_this$props.product,activeCurrency=_this$props.activeCurrency;var _this$context=this.context,onAddToCart=_this$context.onAddToCart,onSelectAttribute=_this$context.onSelectAttribute;var amount=product&&product.prices&&product.prices[activeCurrency].amount;var symbol=product&&product.prices&&product.prices[activeCurrency].currency.symbol;var description=\"\".concat(product.description).replace(/(\\<(\\/?[^>]+)>)/g,\"\");return/*#__PURE__*/_jsxs(\"main\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"section\",{className:styles.blockImg,children:product.gallery&&product.gallery.map(function(img,id){return/*#__PURE__*/_jsx(Image,{onClick:function onClick(){return onChangeImage(id);},className:styles.blockImgItem,width:79,height:80,src:img},id);})}),/*#__PURE__*/_jsxs(\"section\",{className:styles.blockGroup,children:[product.gallery&&/*#__PURE__*/_jsx(Image,{className:styles.groupImg,width:610,height:511,src:product.gallery[currentImgId],alt:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:styles.groupChoice,children:[/*#__PURE__*/_jsx(Title,{className:styles.titleBrand,children:product.brand}),/*#__PURE__*/_jsx(Title,{className:styles.titleName,children:product.name}),/*#__PURE__*/_jsx(\"div\",{className:styles.attributes,children:/*#__PURE__*/_jsx(Attributes,{cartItem:product,onSelectAttribute:onSelectAttribute,attributeName:styles.attributeName,attributeSize:styles.attributeSize,attributeColor:styles.attributeColor})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.groupChoicePrice,children:[/*#__PURE__*/_jsx(\"h5\",{className:styles.h5,children:\"PRICE:\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.price,children:[symbol,amount]})]}),/*#__PURE__*/_jsx(Button,{className:styles.button,onClick:function onClick(){return onAddToCart(product);},children:\"ADD TO CART\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.description,children:description})]})]})]});}}]);return PDP;}(React.PureComponent);PDP.contextType=AppContext;var mapStateToProps=function mapStateToProps(state){return{activeCurrency:state.currencies.activeCurrency,currentImgId:state.pdp.currentImgId,product:state.pdp.product,activeAttributeIndex:state.attributes.activeAttributeIndex,activeAttributeItem:state.attributes.activeAttributeItem,activeAttribute:state.attributes.activeAttribute};};var mapDispatchToProps={onChangeImage:onChangeImage,fetchProduct:fetchProduct,fetchAttributes:fetchAttributes,setActiveAttribute:setActiveAttribute,setActiveAttributeIndex:setActiveAttributeIndex,setActiveAttributeItem:setActiveAttributeItem,setAttributes:setAttributes};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(PDP));","map":{"version":3,"names":["React","styles","Title","Button","Image","Attributes","useParams","AppContext","connect","fetchProduct","onChangeImage","fetchAttributes","setActiveAttribute","setActiveAttributeIndex","setActiveAttributeItem","setAttributes","withRouter","Children","props","match","params","PDP","componentDidMount","renderPDP","getAttributes","cardId","componentDidUpdate","prevProps","product","attributes","substring","currentImgId","activeCurrency","context","onAddToCart","onSelectAttribute","amount","prices","symbol","currency","description","replace","container","blockImg","gallery","map","img","id","blockImgItem","blockGroup","groupImg","name","groupChoice","titleBrand","brand","titleName","attributeName","attributeSize","attributeColor","groupChoicePrice","h5","price","button","PureComponent","contextType","mapStateToProps","state","currencies","pdp","activeAttributeIndex","activeAttributeItem","activeAttribute","mapDispatchToProps"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/pages/Pdp/index.jsx"],"sourcesContent":["import React from \"react\";\nimport styles from \"./Pdp.module.css\";\nimport Title from \"../../components/Title\";\nimport Button from \"../../components/Button\";\nimport Image from \"../../components/Image\";\nimport Attributes from \"../../components/Attributes\";\n\nimport { useParams } from \"react-router-dom\";\nimport { AppContext } from \"../../components/AppContext\";\n\nimport { connect } from \"react-redux\";\nimport { fetchProduct, onChangeImage } from \"../../redux/pdp/slice\";\nimport {\n  fetchAttributes,\n  setActiveAttribute,\n  setActiveAttributeIndex,\n  setActiveAttributeItem,\n  setAttributes,\n} from \"../../redux/attributes/slice\";\n\nexport function withRouter(Children) {\n  return (props) => {\n    const match = { params: useParams() };\n    return <Children {...props} match={match} />;\n  };\n}\n\nclass PDP extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.cardId = this.props.match.params[\"cardId\"].substring(1);\n  }\n\n  componentDidMount = async () => {\n    await this.renderPDP();\n    await this.getAttributes();\n  };\n\n  renderPDP = async () => {\n    const { fetchProduct } = this.props;\n    await fetchProduct(this.cardId);\n  };\n\n  getAttributes = async () => {\n    const { fetchAttributes } = this.props;\n    await fetchAttributes(this.cardId);\n  };\n\n  componentDidUpdate = (prevProps) => {\n    if (prevProps.product.attributes !== this.props.product.attributes) {\n      this.props.setActiveAttributeItem(\"\");\n      this.props.setActiveAttributeIndex(\"\");\n      this.props.setAttributes(this.props.product.attributes);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.setActiveAttributeItem(\"\");\n    this.props.setActiveAttributeIndex(\"\");\n    this.props.setActiveAttribute(\"\");\n  }\n\n  render() {\n    const { currentImgId, onChangeImage, product, activeCurrency } = this.props;\n    const { onAddToCart, onSelectAttribute } = this.context;\n    const amount =\n      product && product.prices && product.prices[activeCurrency].amount;\n    const symbol =\n      product &&\n      product.prices &&\n      product.prices[activeCurrency].currency.symbol;\n    const description = `${product.description}`.replace(\n      /(\\<(\\/?[^>]+)>)/g,\n      \"\"\n    );\n\n    return (\n      <main className={styles.container}>\n        <section className={styles.blockImg}>\n          {product.gallery &&\n            product.gallery.map((img, id) => (\n              <Image\n                onClick={() => onChangeImage(id)}\n                key={id}\n                className={styles.blockImgItem}\n                width={79}\n                height={80}\n                src={img}\n              />\n            ))}\n        </section>\n        <section className={styles.blockGroup}>\n          {product.gallery && (\n            <Image\n              className={styles.groupImg}\n              width={610}\n              height={511}\n              src={product.gallery[currentImgId]}\n              alt={product.name}\n            />\n          )}\n          <div className={styles.groupChoice}>\n            <Title className={styles.titleBrand}>{product.brand}</Title>\n            <Title className={styles.titleName}>{product.name}</Title>\n            <div className={styles.attributes}>\n              <Attributes\n                cartItem={product}\n                onSelectAttribute={onSelectAttribute}\n                attributeName={styles.attributeName}\n                attributeSize={styles.attributeSize}\n                attributeColor={styles.attributeColor}\n              />\n            </div>\n            <div className={styles.groupChoicePrice}>\n              <h5 className={styles.h5}>PRICE:</h5>\n              <div className={styles.price}>\n                {symbol}\n                {amount}\n              </div>\n            </div>\n            <Button\n              className={styles.button}\n              onClick={() => onAddToCart(product)}\n            >\n              ADD TO CART\n            </Button>\n            <p className={styles.description}>{description}</p>\n          </div>\n        </section>\n      </main>\n    );\n  }\n}\n\nPDP.contextType = AppContext;\n\nconst mapStateToProps = (state) => ({\n  activeCurrency: state.currencies.activeCurrency,\n  currentImgId: state.pdp.currentImgId,\n  product: state.pdp.product,\n  activeAttributeIndex: state.attributes.activeAttributeIndex,\n  activeAttributeItem: state.attributes.activeAttributeItem,\n  activeAttribute: state.attributes.activeAttribute,\n});\n\nconst mapDispatchToProps = {\n  onChangeImage,\n  fetchProduct,\n  fetchAttributes,\n  setActiveAttribute,\n  setActiveAttributeIndex,\n  setActiveAttributeItem,\n  setAttributes,\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PDP));\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}