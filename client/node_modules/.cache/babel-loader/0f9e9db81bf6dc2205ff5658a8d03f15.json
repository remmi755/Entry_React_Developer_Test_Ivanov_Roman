{"ast":null,"code":"var _jsxFileName = \"D:\\\\Downloads\\\\Computer-science\\\\MyProject\\\\Entry_React_Developer_Test_Ivanov_Roman\\\\client\\\\src\\\\App.js\";\nimport React from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport Category from \"./pages/Category\";\nimport Header from \"./pages/Header\";\nimport Cart from \"./pages/Cart\";\nimport PDP from \"./pages/Pdp\";\nimport { AppContext } from \"./components/AppContext\";\nimport Modal from \"./components/Modal\";\nimport CartOverlay from \"./components/CartOverlay\";\nimport { fetchCategories } from \"./redux/fetchCategories\";\nimport { connect } from \"react-redux\";\nimport { onOpenPopup, setCurrencies } from \"./redux/currencies/slice\";\nimport { setProductCards, fetchProductCards } from \"./redux/categories/slice\";\nimport { getCart } from \"./redux/cartList/slice\";\nimport { toggleModal } from \"./redux/modal/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.renderProductCards = async () => {\n      // const isMounted = this.isMountedRef.current?.fetchCategories()\n      // if(isMounted) {\n      //   try {\n      //     const result = await fetchCategories();\n      //     const productCards = result.data.categories;\n      //     console.log(productCards)\n      // this.props.setProductCards(productCards)\n      await this.props.fetchProductCards(); // this.setState({\n      //   productCards: productCards,\n      // });\n      // } catch (err) {\n      //   console.log(err);\n      // }\n      // }\n    };\n\n    this.getCurrencies = async () => {\n      const {\n        activeCategory,\n        setCurrencies\n      } = this.props;\n\n      try {\n        const result = await fetchCategories();\n        const currenciesList = result.data.categories[activeCategory].products[0].prices;\n        setCurrencies(currenciesList);\n        console.log(currenciesList);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.onSelectAttribute = (attribute, el, index) => {\n      this.setState({\n        activeAttributeIndex: index,\n        activeAttribute: attribute,\n        activeAttributeItem: attribute.items[index]\n      });\n    };\n\n    this.onAddToCart = product => {\n      const {\n        cartList,\n        getCart\n      } = this.props;\n      const {\n        // cartList,\n        activeAttribute,\n        activeAttributeItem,\n        activeAttributeIndex\n      } = this.state;\n      let newProduct;\n\n      if (!product.isInCart && product.inStock) {\n        newProduct = {\n          attributes: product.attributes,\n          activeAttribute: activeAttribute,\n          activeAttributeItem: activeAttributeItem,\n          activeAttributeIndex: activeAttributeIndex,\n          brand: product.brand,\n          prices: product.prices,\n          gallery: product.gallery,\n          id: product.id,\n          inStock: product.inStock,\n          name: product.name,\n          count: 1,\n          isInCart: false\n        };\n      }\n\n      cartList.forEach(el => {\n        if (el.id === newProduct.id) {\n          newProduct.isInCart = true;\n        }\n      });\n\n      if (!newProduct.isInCart && newProduct.inStock) {\n        newProduct.isInCart = true;\n        localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n        getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n        //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n        // });\n      } else if (newProduct.isInCart) {\n        cartList.forEach((el, index, arr) => {\n          if (el.activeAttributeItem.id !== newProduct.activeAttributeItem.id) {\n            localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n            getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n            //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n            // });\n          } else if (el.activeAttributeItem.id === newProduct.activeAttributeItem.id) {\n            this.setState({\n              count: ++newProduct.count\n            });\n            newProduct = { ...newProduct,\n              count: ++el.count\n            };\n            localStorage.setItem(\"cart\", JSON.stringify(cartList));\n            getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n            //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n            // });\n\n            arr.length = index + 1;\n          }\n        });\n      }\n    };\n\n    this.deleteCartItem = product => {\n      const {\n        cartList\n      } = this.props;\n      const cartListNew = cartList.filter(obj => obj !== product);\n      console.log(cartListNew);\n      console.log('OK'); // const index = cartList.findIndex(\n      //   (x) =>\n      //     x.id === id &&\n      //     x.activeAttributeItem.id === product.activeAttributeItem.id\n      // );\n      // console.log(index)\n      // cartList.splice(index, 1);\n\n      localStorage.setItem(\"cart\", JSON.stringify(cartListNew));\n      getCart(cartListNew);\n    };\n\n    this.countIncrease = (product, id) => {\n      const {\n        cartList\n      } = this.props;\n      console.log(\"increase\");\n\n      if (product.id === id) {\n        this.setState({\n          count: ++product.count\n        });\n      }\n\n      let newProductChanged = { ...product,\n        count: ++this.state.count\n      };\n      cartList.forEach(el => {\n        if (el.id === product.id) {\n          product = newProductChanged;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cartList));\n    };\n\n    this.countDecrease = (product, id) => {\n      const {\n        cartList\n      } = this.props;\n\n      if (product.id === id) {\n        this.setState({\n          count: product.count - 1 > 0 ? --product.count : this.deleteCartItem(product)\n        });\n      }\n\n      let newProductChanged = { ...product,\n        count: --this.state.count\n      };\n      cartList.forEach(el => {\n        if (el.id === product.id) {\n          product = newProductChanged;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cartList));\n    };\n\n    this.onHidePopup = () => {\n      document.body.style.overflow = \"\";\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.state = {\n      // modalShow: false,\n      count: 1,\n      // productCards: [this.renderProductCards],\n      // activeCategory: 0,\n      products: [this.renderProductCards],\n      // openPopup: false,\n      // activeCurrency: 0,\n      // selectedCurrency: \"$\",\n      // cartList: this.getCartFromLSn(),\n      activeAttributeItem: 0,\n      activeAttributeIndex: 0,\n      activeAttribute: \"\",\n      total: {\n        totalPrice: 0,\n        totalCount: 0\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.renderProductCards();\n    this.getCurrencies();\n  }\n\n  render() {\n    console.log(this.props.productCards);\n    const totalPrice = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.prices[this.props.activeCurrency].amount * curr.count;\n    }, 0).toFixed(2);\n    const totalCount = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.count;\n    }, 0);\n    const {\n      toggleModal,\n      modalShow\n    } = this.props;\n    const {\n      productCards,\n      // activeCurrency,\n      // cartList,\n      count,\n      // currencies,\n      // activeCategory,\n      // selectedCurrency,\n      total,\n      // openPopup,\n      // modalShow,\n      activeAttributeItem,\n      activeAttribute,\n      activeAttributeIndex\n    } = this.state;\n    const {\n      deleteCartItem,\n      countIncrease,\n      countDecrease,\n      onHidePopup,\n      onSelectAttribute,\n      getCartFromLS,\n      onSelectCategories,\n      // onOpenPopup,\n      // onSelectCurrencies,\n      // toggleModal,\n      onAddToCart\n    } = this;\n    return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        totalCount,\n        // modalShow,\n        totalPrice,\n        // productCards,\n        // activeCurrency,\n        // currencies,\n        // openPopup,\n        activeAttributeIndex,\n        // cartList,\n        count,\n        // activeCategory,\n        // selectedCurrency,\n        total,\n        activeAttributeItem,\n        activeAttribute,\n        deleteCartItem,\n        countIncrease,\n        countDecrease,\n        onHidePopup,\n        onSelectAttribute,\n        // getCartFromLS,\n        // onSelectCategories,\n        // onOpenPopup,\n        // onSelectCurrencies,\n        // toggleModal,\n        onAddToCart\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(Category, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cart\",\n            element: /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/:cardId\",\n            element: /*#__PURE__*/_jsxDEV(PDP, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          className: modalShow ? document.body.style.overflow = \"hidden\" : document.body.style.overflow = \"\",\n          close: toggleModal,\n          shown: modalShow,\n          children: /*#__PURE__*/_jsxDEV(CartOverlay, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  currencies: state.currencies.currencies,\n  productCards: state.categories.productCards,\n  activeCurrency: state.currencies.activeCurrency,\n  cartList: state.cartList.cartList,\n  activeCategory: state.categories.activeCategory,\n  modalShow: state.modal.modalShow\n});\n\nconst mapDispatchToProps = {\n  fetchCategories,\n  setCurrencies,\n  setProductCards,\n  getCart,\n  onOpenPopup,\n  fetchProductCards,\n  toggleModal\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"names":["React","Route","Routes","Category","Header","Cart","PDP","AppContext","Modal","CartOverlay","fetchCategories","connect","onOpenPopup","setCurrencies","setProductCards","fetchProductCards","getCart","toggleModal","App","Component","constructor","props","renderProductCards","getCurrencies","activeCategory","result","currenciesList","data","categories","products","prices","console","log","err","onSelectAttribute","attribute","el","index","setState","activeAttributeIndex","activeAttribute","activeAttributeItem","items","onAddToCart","product","cartList","state","newProduct","isInCart","inStock","attributes","brand","gallery","id","name","count","forEach","localStorage","setItem","JSON","stringify","parse","getItem","arr","length","deleteCartItem","cartListNew","filter","obj","countIncrease","newProductChanged","countDecrease","onHidePopup","document","body","style","overflow","modalShow","total","totalPrice","totalCount","componentDidMount","render","productCards","reduce","prev","curr","activeCurrency","amount","toFixed","getCartFromLS","onSelectCategories","mapStateToProps","currencies","modal","mapDispatchToProps"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport Category from \"./pages/Category\";\nimport Header from \"./pages/Header\";\nimport Cart from \"./pages/Cart\";\nimport PDP from \"./pages/Pdp\";\n\nimport { AppContext } from \"./components/AppContext\";\nimport Modal from \"./components/Modal\";\nimport CartOverlay from \"./components/CartOverlay\";\n\nimport { fetchCategories } from \"./redux/fetchCategories\";\nimport { connect } from \"react-redux\";\nimport { onOpenPopup, setCurrencies } from \"./redux/currencies/slice\";\nimport { setProductCards, fetchProductCards } from \"./redux/categories/slice\";\nimport { getCart } from \"./redux/cartList/slice\";\nimport { toggleModal } from \"./redux/modal/slice\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // modalShow: false,\n      count: 1,\n      // productCards: [this.renderProductCards],\n      // activeCategory: 0,\n      products: [this.renderProductCards],\n      // openPopup: false,\n      // activeCurrency: 0,\n      // selectedCurrency: \"$\",\n      // cartList: this.getCartFromLSn(),\n      activeAttributeItem: 0,\n      activeAttributeIndex: 0,\n      activeAttribute: \"\",\n      total: {\n        totalPrice: 0,\n        totalCount: 0,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.renderProductCards();\n    this.getCurrencies();\n  }\n\n  renderProductCards = async () => {\n    // const isMounted = this.isMountedRef.current?.fetchCategories()\n    // if(isMounted) {\n    //   try {\n    //     const result = await fetchCategories();\n    //     const productCards = result.data.categories;\n    //     console.log(productCards)\n    // this.props.setProductCards(productCards)\n    await this.props.fetchProductCards();\n    // this.setState({\n    //   productCards: productCards,\n    // });\n    // } catch (err) {\n    //   console.log(err);\n    // }\n    // }\n  };\n\n  // getProductCards = () => {\n  //   this.renderProductCards()\n  // }\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if(prevProps.productCards !== this.props.productCards) {\n  //     // this.renderProductCards();\n  //     this.getProductCards()\n  //   }\n  // }\n\n  // getCartFromLS = () => {\n  //   const data = localStorage.getItem(\"cart\");\n  //   return data ? JSON.parse(data) : [];\n  // };\n\n  // onSelectCategories = (index) => {\n  //   this.setState({\n  //     activeCategory: index,\n  //   });\n  // };\n  //\n  getCurrencies = async () => {\n    const { activeCategory, setCurrencies } = this.props;\n    try {\n      const result = await fetchCategories();\n      const currenciesList =\n        result.data.categories[activeCategory].products[0].prices;\n      setCurrencies(currenciesList);\n      console.log(currenciesList);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  // onSelectCurrencies = (index) => {\n  //   const { currencies } = this.props;\n  //   this.setState({\n  //     activeCurrency: index,\n  //     selectedCurrency: currencies[index].currency.symbol,\n  //     openPopup: false,\n  //   });\n  // };\n\n  // onOpenPopup = () => {\n  //   this.setState({ openPopup: !this.state.openPopup });\n  // };\n\n  onSelectAttribute = (attribute, el, index) => {\n    this.setState({\n      activeAttributeIndex: index,\n      activeAttribute: attribute,\n      activeAttributeItem: attribute.items[index],\n    });\n  };\n\n  onAddToCart = (product) => {\n    const { cartList, getCart } = this.props;\n    const {\n      // cartList,\n      activeAttribute,\n      activeAttributeItem,\n      activeAttributeIndex,\n    } = this.state;\n    let newProduct;\n\n    if (!product.isInCart && product.inStock) {\n      newProduct = {\n        attributes: product.attributes,\n        activeAttribute: activeAttribute,\n        activeAttributeItem: activeAttributeItem,\n        activeAttributeIndex: activeAttributeIndex,\n        brand: product.brand,\n        prices: product.prices,\n        gallery: product.gallery,\n        id: product.id,\n        inStock: product.inStock,\n        name: product.name,\n        count: 1,\n        isInCart: false,\n      };\n    }\n\n    cartList.forEach((el) => {\n      if (el.id === newProduct.id) {\n        newProduct.isInCart = true;\n      }\n    });\n\n    if (!newProduct.isInCart && newProduct.inStock) {\n      newProduct.isInCart = true;\n      localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n      getCart(JSON.parse(localStorage.getItem(\"cart\")));\n      // this.setState({\n      //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n      // });\n    } else if (newProduct.isInCart) {\n      cartList.forEach((el, index, arr) => {\n        if (el.activeAttributeItem.id !== newProduct.activeAttributeItem.id) {\n          localStorage.setItem(\n            \"cart\",\n            JSON.stringify([...cartList, newProduct])\n          );\n          getCart(JSON.parse(localStorage.getItem(\"cart\")));\n          // this.setState({\n          //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n          // });\n        } else if (\n          el.activeAttributeItem.id === newProduct.activeAttributeItem.id\n        ) {\n          this.setState({\n            count: ++newProduct.count,\n          });\n          newProduct = { ...newProduct, count: ++el.count };\n          localStorage.setItem(\"cart\", JSON.stringify(cartList));\n          getCart(JSON.parse(localStorage.getItem(\"cart\")));\n          // this.setState({\n          //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n          // });\n          arr.length = index + 1;\n        }\n      });\n    }\n  };\n\n  deleteCartItem = (product) => {\n    const { cartList } = this.props;\n\n    const cartListNew = cartList.filter((obj) => obj !== product)\n    console.log(cartListNew)\n    console.log('OK')\n\n\n    // const index = cartList.findIndex(\n    //   (x) =>\n    //     x.id === id &&\n    //     x.activeAttributeItem.id === product.activeAttributeItem.id\n    // );\n    // console.log(index)\n\n    // cartList.splice(index, 1);\n    localStorage.setItem(\"cart\", JSON.stringify(cartListNew))\n    getCart(cartListNew);\n  };\n\n  countIncrease = (product, id) => {\n    const { cartList } = this.props;\n\n    console.log(\"increase\")\n\n    if (product.id === id) {\n      this.setState({\n        count: ++product.count,\n      });\n    }\n\n    let newProductChanged = { ...product, count: ++this.state.count };\n\n    cartList.forEach((el) => {\n      if (el.id === product.id) {\n        product = newProductChanged;\n      }\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(cartList));\n  };\n\n  countDecrease = (product, id) => {\n    const { cartList } = this.props;\n\n    if (product.id === id) {\n      this.setState({\n        count:\n          product.count - 1 > 0\n            ? --product.count\n            : this.deleteCartItem(product),\n      });\n    }\n\n    let newProductChanged = { ...product, count: --this.state.count };\n\n    cartList.forEach((el) => {\n      if (el.id === product.id) {\n        product = newProductChanged;\n      }\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(cartList));\n  };\n\n  // toggleModal = () => {\n  //   this.setState({\n  //     modalShow: !this.state.modalShow,\n  //   });\n  // };\n\n  onHidePopup = () => {\n    document.body.style.overflow = \"\";\n    this.setState({\n      modalShow: false,\n    });\n  };\n\n  render() {\n    console.log(this.props.productCards);\n\n    const totalPrice = this.props.cartList\n      .reduce((prev, curr) => {\n        return (\n          prev + curr.prices[this.props.activeCurrency].amount * curr.count\n        );\n      }, 0)\n      .toFixed(2);\n\n    const totalCount = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.count;\n    }, 0);\n\n    const { toggleModal, modalShow } = this.props;\n    const {\n      productCards,\n      // activeCurrency,\n      // cartList,\n      count,\n      // currencies,\n      // activeCategory,\n      // selectedCurrency,\n      total,\n      // openPopup,\n      // modalShow,\n      activeAttributeItem,\n      activeAttribute,\n      activeAttributeIndex,\n    } = this.state;\n\n    const {\n      deleteCartItem,\n      countIncrease,\n      countDecrease,\n      onHidePopup,\n      onSelectAttribute,\n      getCartFromLS,\n      onSelectCategories,\n      // onOpenPopup,\n      // onSelectCurrencies,\n      // toggleModal,\n      onAddToCart,\n    } = this;\n\n    return (\n      <AppContext.Provider\n        value={{\n          totalCount,\n          // modalShow,\n          totalPrice,\n          // productCards,\n          // activeCurrency,\n          // currencies,\n          // openPopup,\n          activeAttributeIndex,\n          // cartList,\n          count,\n          // activeCategory,\n          // selectedCurrency,\n          total,\n          activeAttributeItem,\n          activeAttribute,\n          deleteCartItem,\n          countIncrease,\n          countDecrease,\n          onHidePopup,\n          onSelectAttribute,\n          // getCartFromLS,\n          // onSelectCategories,\n          // onOpenPopup,\n          // onSelectCurrencies,\n          // toggleModal,\n          onAddToCart,\n        }}\n      >\n        <div>\n          <Header />\n          <Routes>\n            <Route path=\"/\" element={<Category />} />\n            <Route path=\"/cart\" element={<Cart />} />\n            <Route path=\"/:cardId\" element={<PDP />} />\n          </Routes>\n          <Modal\n            className={\n              modalShow\n                ? (document.body.style.overflow = \"hidden\")\n                : (document.body.style.overflow = \"\")\n            }\n            close={toggleModal}\n            shown={modalShow}\n          >\n            <CartOverlay />\n          </Modal>\n        </div>\n      </AppContext.Provider>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  currencies: state.currencies.currencies,\n  productCards: state.categories.productCards,\n  activeCurrency: state.currencies.activeCurrency,\n  cartList: state.cartList.cartList,\n  activeCategory: state.categories.activeCategory,\n  modalShow: state.modal.modalShow,\n});\nconst mapDispatchToProps = {\n  fetchCategories,\n  setCurrencies,\n  setProductCards,\n  getCart,\n  onOpenPopup,\n  fetchProductCards,\n  toggleModal,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}