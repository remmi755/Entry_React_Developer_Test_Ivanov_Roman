{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { getCartFromLS } from \"./getCartFromLs\";\nconst initialState = {\n  cartList: getCartFromLS(),\n  count: 1\n};\nexport const cartListSlice = createSlice({\n  name: \"cartList\",\n  initialState,\n  reducers: {\n    setCartList: (state, action) => {\n      state.cartList = action.payload;\n    },\n    deleteCartItem: (state, action) => {\n      const cartListNew = state.cartList.filter(item => item.id !== action.payload.id);\n      setCartList(cartListNew);\n      localStorage.setItem(\"cart\", JSON.stringify(cartListNew));\n    },\n    countDecrease: (state, action) => {\n      if (action.payload.count - 1 > 0) {\n        const newProductChanged = { ...action.payload,\n          count: action.payload.count - 1\n        };\n        state.cartList.forEach((el, index) => {\n          if (el.id === action.payload.id) {\n            state.cartList[index] = newProductChanged;\n          }\n        }); // setCartList(state.cartList);\n\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\n      } else {\n        this.deleteCartItem(action.payload);\n      }\n\n      ;\n    }\n  }\n});\nexport const {\n  setCartList,\n  countDecrease,\n  deleteCartItem\n} = cartListSlice.actions;\nexport default cartListSlice.reducer;","map":{"version":3,"names":["createSlice","getCartFromLS","initialState","cartList","count","cartListSlice","name","reducers","setCartList","state","action","payload","deleteCartItem","cartListNew","filter","item","id","localStorage","setItem","JSON","stringify","countDecrease","newProductChanged","forEach","el","index","actions","reducer"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/redux/cartList/slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport {getCartFromLS} from \"./getCartFromLs\";\r\n\r\nconst initialState = {\r\n  cartList: getCartFromLS(),\r\n  count: 1,\r\n};\r\n\r\nexport const cartListSlice = createSlice({\r\n  name: \"cartList\",\r\n  initialState,\r\n  reducers: {\r\n    setCartList: (state, action) => {\r\n      state.cartList =  action.payload;\r\n    },\r\n\r\n    deleteCartItem: (state, action) => {\r\n      const cartListNew = state.cartList.filter((item) => item.id !== action.payload.id);\r\n      setCartList(cartListNew)\r\n      localStorage.setItem(\"cart\", JSON.stringify(cartListNew));\r\n    },\r\n\r\n    countDecrease: (state, action) => {\r\n      if(action.payload.count - 1 > 0) {\r\n        const newProductChanged = { ...action.payload, count: action.payload.count - 1}\r\n        state.cartList.forEach((el, index) => {\r\n          if (el.id === action.payload.id) {\r\n            state.cartList[index] = newProductChanged;\r\n          }\r\n        });\r\n        // setCartList(state.cartList);\r\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\r\n      } else {\r\n        this.deleteCartItem(action.payload)\r\n      };\r\n    },\r\n\r\n\r\n  },\r\n});\r\n\r\nexport const { setCartList, countDecrease, deleteCartItem } = cartListSlice.actions;\r\n\r\nexport default cartListSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AAEA,SAAQC,aAAR,QAA4B,iBAA5B;AAEA,MAAMC,YAAY,GAAG;EACnBC,QAAQ,EAAEF,aAAa,EADJ;EAEnBG,KAAK,EAAE;AAFY,CAArB;AAKA,OAAO,MAAMC,aAAa,GAAGL,WAAW,CAAC;EACvCM,IAAI,EAAE,UADiC;EAEvCJ,YAFuC;EAGvCK,QAAQ,EAAE;IACRC,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;MAC9BD,KAAK,CAACN,QAAN,GAAkBO,MAAM,CAACC,OAAzB;IACD,CAHO;IAKRC,cAAc,EAAE,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACjC,MAAMG,WAAW,GAAGJ,KAAK,CAACN,QAAN,CAAeW,MAAf,CAAuBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACC,OAAP,CAAeK,EAA3D,CAApB;MACAR,WAAW,CAACK,WAAD,CAAX;MACAI,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeP,WAAf,CAA7B;IACD,CATO;IAWRQ,aAAa,EAAE,CAACZ,KAAD,EAAQC,MAAR,KAAmB;MAChC,IAAGA,MAAM,CAACC,OAAP,CAAeP,KAAf,GAAuB,CAAvB,GAA2B,CAA9B,EAAiC;QAC/B,MAAMkB,iBAAiB,GAAG,EAAE,GAAGZ,MAAM,CAACC,OAAZ;UAAqBP,KAAK,EAAEM,MAAM,CAACC,OAAP,CAAeP,KAAf,GAAuB;QAAnD,CAA1B;QACAK,KAAK,CAACN,QAAN,CAAeoB,OAAf,CAAuB,CAACC,EAAD,EAAKC,KAAL,KAAe;UACpC,IAAID,EAAE,CAACR,EAAH,KAAUN,MAAM,CAACC,OAAP,CAAeK,EAA7B,EAAiC;YAC/BP,KAAK,CAACN,QAAN,CAAesB,KAAf,IAAwBH,iBAAxB;UACD;QACF,CAJD,EAF+B,CAO/B;;QACAL,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeX,KAAK,CAACN,QAArB,CAA7B;MACD,CATD,MASO;QACL,KAAKS,cAAL,CAAoBF,MAAM,CAACC,OAA3B;MACD;;MAAA;IACF;EAxBO;AAH6B,CAAD,CAAjC;AAiCP,OAAO,MAAM;EAAEH,WAAF;EAAea,aAAf;EAA8BT;AAA9B,IAAiDP,aAAa,CAACqB,OAArE;AAEP,eAAerB,aAAa,CAACsB,OAA7B"},"metadata":{},"sourceType":"module"}