{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { getCartFromLS } from \"./getCartFromLs\";\nconst initialState = {\n  cartList: getCartFromLS(),\n  count: 1\n};\nexport const cartListSlice = createSlice({\n  name: \"cartList\",\n  initialState,\n  reducers: {\n    setCartList: (state, action) => {\n      state.cartList = action.payload;\n    },\n    countIncrease: (state, action) => {\n      const newProductChanged = { ...action.payload,\n        count: action.payload.count + 1\n      };\n      state.cartList.forEach((el, index) => {\n        if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\n          state.cartList[index] = newProductChanged;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\n    },\n    countDecrease: (state, action) => {\n      if (action.payload.count - 1 > 0) {\n        const newProductChanged = { ...action.payload,\n          count: action.payload.count - 1\n        };\n        state.cartList.forEach((el, index) => {\n          if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\n            state.cartList[index] = newProductChanged;\n          }\n        });\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\n      } else {\n        state.cartList = state.cartList.filter(item => item.activeAttributeItem.id !== action.payload.activeAttributeItem.id);\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\n      }\n\n      ;\n    }\n  }\n});\nexport const {\n  setCartList,\n  countDecrease,\n  countIncrease\n} = cartListSlice.actions;\nexport default cartListSlice.reducer;","map":{"version":3,"names":["createSlice","getCartFromLS","initialState","cartList","count","cartListSlice","name","reducers","setCartList","state","action","payload","countIncrease","newProductChanged","forEach","el","index","activeAttributeItem","id","localStorage","setItem","JSON","stringify","countDecrease","filter","item","actions","reducer"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/redux/cartList/slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport {getCartFromLS} from \"./getCartFromLs\";\r\n\r\nconst initialState = {\r\n  cartList: getCartFromLS(),\r\n  count: 1,\r\n};\r\n\r\nexport const cartListSlice = createSlice({\r\n  name: \"cartList\",\r\n  initialState,\r\n  reducers: {\r\n    setCartList: (state, action) => {\r\n      state.cartList =  action.payload;\r\n    },\r\n\r\n    countIncrease: (state, action) => {\r\n      const newProductChanged = { ...action.payload, count: action.payload.count + 1};\r\n\r\n      state.cartList.forEach((el, index) => {\r\n        if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\r\n          state.cartList[index] = newProductChanged;\r\n        }\r\n      });\r\n      localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\r\n    },\r\n\r\n    countDecrease: (state, action) => {\r\n      if(action.payload.count - 1 > 0) {\r\n        const newProductChanged = { ...action.payload, count: action.payload.count - 1}\r\n        state.cartList.forEach((el, index) => {\r\n          if (el.activeAttributeItem.id === action.payload.activeAttributeItem.id) {\r\n            state.cartList[index] = newProductChanged;\r\n          }\r\n        });\r\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList));\r\n      } else {\r\n        state.cartList = state.cartList.filter((item) => item.activeAttributeItem.id !== action.payload.activeAttributeItem.id)\r\n        localStorage.setItem(\"cart\", JSON.stringify(state.cartList))\r\n      };\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setCartList, countDecrease, countIncrease } = cartListSlice.actions;\r\n\r\nexport default cartListSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AAEA,SAAQC,aAAR,QAA4B,iBAA5B;AAEA,MAAMC,YAAY,GAAG;EACnBC,QAAQ,EAAEF,aAAa,EADJ;EAEnBG,KAAK,EAAE;AAFY,CAArB;AAKA,OAAO,MAAMC,aAAa,GAAGL,WAAW,CAAC;EACvCM,IAAI,EAAE,UADiC;EAEvCJ,YAFuC;EAGvCK,QAAQ,EAAE;IACRC,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;MAC9BD,KAAK,CAACN,QAAN,GAAkBO,MAAM,CAACC,OAAzB;IACD,CAHO;IAKRC,aAAa,EAAE,CAACH,KAAD,EAAQC,MAAR,KAAmB;MAChC,MAAMG,iBAAiB,GAAG,EAAE,GAAGH,MAAM,CAACC,OAAZ;QAAqBP,KAAK,EAAEM,MAAM,CAACC,OAAP,CAAeP,KAAf,GAAuB;MAAnD,CAA1B;MAEAK,KAAK,CAACN,QAAN,CAAeW,OAAf,CAAuB,CAACC,EAAD,EAAKC,KAAL,KAAe;QACpC,IAAID,EAAE,CAACE,mBAAH,CAAuBC,EAAvB,KAA8BR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAArE,EAAyE;UACvET,KAAK,CAACN,QAAN,CAAea,KAAf,IAAwBH,iBAAxB;QACD;MACF,CAJD;MAKAM,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B;IACD,CAdO;IAgBRoB,aAAa,EAAE,CAACd,KAAD,EAAQC,MAAR,KAAmB;MAChC,IAAGA,MAAM,CAACC,OAAP,CAAeP,KAAf,GAAuB,CAAvB,GAA2B,CAA9B,EAAiC;QAC/B,MAAMS,iBAAiB,GAAG,EAAE,GAAGH,MAAM,CAACC,OAAZ;UAAqBP,KAAK,EAAEM,MAAM,CAACC,OAAP,CAAeP,KAAf,GAAuB;QAAnD,CAA1B;QACAK,KAAK,CAACN,QAAN,CAAeW,OAAf,CAAuB,CAACC,EAAD,EAAKC,KAAL,KAAe;UACpC,IAAID,EAAE,CAACE,mBAAH,CAAuBC,EAAvB,KAA8BR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAArE,EAAyE;YACvET,KAAK,CAACN,QAAN,CAAea,KAAf,IAAwBH,iBAAxB;UACD;QACF,CAJD;QAKAM,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B;MACD,CARD,MAQO;QACLM,KAAK,CAACN,QAAN,GAAiBM,KAAK,CAACN,QAAN,CAAeqB,MAAf,CAAuBC,IAAD,IAAUA,IAAI,CAACR,mBAAL,CAAyBC,EAAzB,KAAgCR,MAAM,CAACC,OAAP,CAAeM,mBAAf,CAAmCC,EAAnG,CAAjB;QACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,KAAK,CAACN,QAArB,CAA7B;MACD;;MAAA;IACF;EA7BO;AAH6B,CAAD,CAAjC;AAoCP,OAAO,MAAM;EAAEK,WAAF;EAAee,aAAf;EAA8BX;AAA9B,IAAgDP,aAAa,CAACqB,OAApE;AAEP,eAAerB,aAAa,CAACsB,OAA7B"},"metadata":{},"sourceType":"module"}