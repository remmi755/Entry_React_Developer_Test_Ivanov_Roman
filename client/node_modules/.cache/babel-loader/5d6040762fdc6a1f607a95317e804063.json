{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { fetchProductItem } from \"../fetchProduct\";\nexport const fetchProduct = createAsyncThunk(\"pdp/fetchByStatus\", async () => {\n  const {\n    data\n  } = await fetchProductItem();\n  return data.product;\n}); // const attributes = [fetchProduct].attributes;\n// const prices = [fetchProduct].prices[this.props.activeCurrency].amount;\n// const symbol = [fetchProduct].prices[this.props.activeCurrency].currency.symbol;\n\nconst initialState = {\n  activeCurrency: 0,\n  selectedCurrency: \"$\",\n  openPopup: false,\n  currencies: [],\n  status: \"loading\",\n  product: [fetchProduct],\n  currentImgId: 0,\n  attributes: [fetchProduct].attributes,\n  prices: [fetchProduct].prices[activeCurrency].amount,\n  symbol: [fetchProduct].prices[activeCurrency].currency.symbol\n};\nexport const pdpSlice = createSlice({\n  name: \"pdp\",\n  initialState,\n  reducers: {\n    onSelectCurrencies: (state, action) => {\n      state.activeCurrency = action.payload;\n      state.selectedCurrency = state.currencies[action.payload].currency.symbol;\n      state.openPopup = false;\n    },\n    onOpenPopup: state => {\n      state.openPopup = !state.openPopup;\n    },\n    onClosePopup: (state, action) => {\n      state.openPopup = action.payload;\n    },\n    setCurrencies: (state, action) => {\n      state.currencies = action.payload;\n    },\n    onChangeImage: (state, action) => {\n      state.currentImgId = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchProduct.pending, state => {\n      console.log(\"Идет отправка\");\n      state.status = 'loading';\n    });\n    builder.addCase(fetchProduct.fulfilled, (state, action) => {\n      console.log(\"Получение\");\n      state.product = action.payload;\n      state.status = 'success';\n    });\n    builder.addCase(fetchProduct.rejected, state => {\n      state.status = 'error';\n      state.product = [];\n    });\n  }\n});\nexport const {\n  onChangeImage,\n  setCurrencies,\n  onSelectCurrencies,\n  onOpenPopup,\n  onClosePopup\n} = pdpSlice.actions;\nexport default pdpSlice.reducer; // const mapStateToProps = (state) => ({\n//   activeCurrency: state.currencies.activeCurrency,\n// });\n//\n//\n//\n// export default withRouter(connect(mapStateToProps )(pdpSlice.reducer))","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchProductItem","fetchProduct","data","product","initialState","activeCurrency","selectedCurrency","openPopup","currencies","status","currentImgId","attributes","prices","amount","symbol","currency","pdpSlice","name","reducers","onSelectCurrencies","state","action","payload","onOpenPopup","onClosePopup","setCurrencies","onChangeImage","extraReducers","builder","addCase","pending","console","log","fulfilled","rejected","actions","reducer"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/redux/pdp/slice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport { fetchProductItem } from \"../fetchProduct\";\r\n\r\n\r\n\r\nexport const fetchProduct = createAsyncThunk(\r\n  \"pdp/fetchByStatus\",\r\n  async () => {\r\n    const { data } = await fetchProductItem();\r\n    return data.product;\r\n  }\r\n);\r\n\r\n// const attributes = [fetchProduct].attributes;\r\n// const prices = [fetchProduct].prices[this.props.activeCurrency].amount;\r\n// const symbol = [fetchProduct].prices[this.props.activeCurrency].currency.symbol;\r\n\r\nconst initialState = {\r\n  activeCurrency: 0,\r\n  selectedCurrency: \"$\",\r\n  openPopup: false,\r\n  currencies: [],\r\n  status: \"loading\",\r\n  product: [fetchProduct],\r\n  currentImgId: 0,\r\n  attributes: [fetchProduct].attributes,\r\n  prices: [fetchProduct].prices[activeCurrency].amount,\r\n  symbol: [fetchProduct].prices[activeCurrency].currency.symbol\r\n};\r\n\r\nexport const pdpSlice = createSlice({\r\n  name: \"pdp\",\r\n  initialState,\r\n  reducers: {\r\n    onSelectCurrencies: (state, action) => {\r\n      state.activeCurrency = action.payload;\r\n      state.selectedCurrency = state.currencies[action.payload].currency.symbol;\r\n      state.openPopup = false\r\n    },\r\n\r\n    onOpenPopup: (state) => {\r\n      state.openPopup = !state.openPopup;\r\n    },\r\n\r\n    onClosePopup: (state, action) => {\r\n      state.openPopup = action.payload;\r\n    },\r\n\r\n    setCurrencies: (state, action) => {\r\n      state.currencies = action.payload;\r\n    },\r\n\r\n    onChangeImage: (state, action) => {\r\n      state.currentImgId = action.payload;\r\n    },\r\n\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProduct.pending, (state) => {\r\n      console.log(\"Идет отправка\")\r\n      state.status = 'loading'\r\n\r\n    })\r\n    builder.addCase(fetchProduct.fulfilled, (state, action) => {\r\n      console.log(\"Получение\")\r\n      state.product = action.payload\r\n      state.status = 'success'\r\n    })\r\n    builder.addCase(fetchProduct.rejected, (state) => {\r\n      state.status = 'error'\r\n      state.product = []\r\n    })\r\n  },\r\n});\r\n\r\nexport const { onChangeImage, setCurrencies,onSelectCurrencies, onOpenPopup, onClosePopup } = pdpSlice.actions;\r\n\r\nexport default pdpSlice.reducer;\r\n\r\n// const mapStateToProps = (state) => ({\r\n//   activeCurrency: state.currencies.activeCurrency,\r\n// });\r\n//\r\n//\r\n//\r\n// export default withRouter(connect(mapStateToProps )(pdpSlice.reducer))"],"mappings":"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"},"metadata":{},"sourceType":"module"}