{"ast":null,"code":"var _jsxFileName = \"D:\\\\Downloads\\\\Computer-science\\\\MyProject\\\\Entry_React_Developer_Test_Ivanov_Roman\\\\client\\\\src\\\\App.js\";\nimport React from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport Category from \"./pages/Category\";\nimport Header from \"./pages/Header\";\nimport Cart from \"./pages/Cart\";\nimport PDP from \"./pages/Pdp\";\nimport { AppContext } from \"./components/AppContext\";\nimport Modal from \"./components/Modal\";\nimport CartOverlay from \"./components/CartOverlay\";\nimport { fetchCategories } from \"./redux/fetchCategories\";\nimport { connect } from \"react-redux\";\nimport { onOpenPopup, setCurrencies } from \"./redux/currencies/slice\";\nimport { setProductCards } from \"./redux/categories/slice\";\nimport { getCart } from \"./redux/cartList/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.renderProductCards = async () => {\n      // const isMounted = this.isMountedRef.current?.fetchCategories()\n      // if(isMounted) {\n      try {\n        const result = await fetchCategories();\n        const productCards = result.data.categories;\n        console.log(productCards); // this.props.setProductCards(productCards)\n\n        this.setState({\n          productCards: productCards\n        });\n      } catch (err) {\n        console.log(err);\n      } // }\n\n    };\n\n    this.getProductCards = () => {\n      this.renderProductCards();\n    };\n\n    this.onSelectCategories = index => {\n      this.setState({\n        activeCategory: index\n      });\n    };\n\n    this.getCurrencies = async () => {\n      try {\n        const result = await fetchCategories();\n        const currenciesList = result.data.categories[this.state.activeCategory].products[0].prices;\n        this.props.setCurrencies(currenciesList);\n        console.log(currenciesList);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.onSelectAttribute = (attribute, el, index) => {\n      this.setState({\n        activeAttributeIndex: index,\n        activeAttribute: attribute,\n        activeAttributeItem: attribute.items[index]\n      });\n    };\n\n    this.onAddToCart = product => {\n      const {\n        cartList\n      } = this.props;\n      const {\n        // cartList,\n        activeAttribute,\n        activeAttributeItem,\n        activeAttributeIndex\n      } = this.state;\n      let newProduct;\n\n      if (!product.isInCart && product.inStock) {\n        newProduct = {\n          attributes: product.attributes,\n          activeAttribute: activeAttribute,\n          activeAttributeItem: activeAttributeItem,\n          activeAttributeIndex: activeAttributeIndex,\n          brand: product.brand,\n          prices: product.prices,\n          gallery: product.gallery,\n          id: product.id,\n          inStock: product.inStock,\n          name: product.name,\n          count: 1,\n          isInCart: false\n        };\n      }\n\n      cartList.forEach(el => {\n        if (el.id === newProduct.id) {\n          newProduct.isInCart = true;\n        }\n      });\n\n      if (!newProduct.isInCart && newProduct.inStock) {\n        newProduct.isInCart = true;\n        localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n        this.props.getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n        //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n        // });\n      } else if (newProduct.isInCart) {\n        cartList.forEach((el, index, arr) => {\n          if (el.activeAttributeItem.id !== newProduct.activeAttributeItem.id) {\n            localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n            this.props.getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n            //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n            // });\n          } else if (el.activeAttributeItem.id === newProduct.activeAttributeItem.id) {\n            this.setState({\n              count: ++newProduct.count\n            });\n            newProduct = { ...newProduct,\n              count: ++el.count\n            };\n            localStorage.setItem(\"cart\", JSON.stringify(cartList));\n            this.props.getCart(JSON.parse(localStorage.getItem(\"cart\"))); // this.setState({\n            //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n            // });\n\n            arr.length = index + 1;\n          }\n        });\n      }\n    };\n\n    this.deleteCartItem = (product, id) => {\n      const {\n        cartList\n      } = this.state;\n      const index = cartList.findIndex(x => x.id === id && x.activeAttributeItem.id === product.activeAttributeItem.id);\n      cartList.splice(index, 1);\n      localStorage.setItem(\"cart\", JSON.stringify(cartList));\n    };\n\n    this.countIncrease = (product, id) => {\n      const {\n        cartList\n      } = this.state;\n\n      if (product.id === id) {\n        this.setState({\n          count: ++product.count\n        });\n      }\n\n      let newProductChanged = { ...product,\n        count: ++this.state.count\n      };\n      cartList.forEach(el => {\n        if (el.id === product.id) {\n          product = newProductChanged;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cartList));\n    };\n\n    this.countDecrease = (product, id) => {\n      const {\n        cartList\n      } = this.state;\n\n      if (product.id === id) {\n        this.setState({\n          count: product.count - 1 > 0 ? --product.count : this.deleteCartItem(product, id)\n        });\n      }\n\n      let newProductChanged = { ...product,\n        count: --this.state.count\n      };\n      cartList.forEach(el => {\n        if (el.id === product.id) {\n          product = newProductChanged;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cartList));\n    };\n\n    this.toggleModal = () => {\n      this.setState({\n        modalShow: !this.state.modalShow\n      });\n    };\n\n    this.onHidePopup = () => {\n      document.body.style.overflow = \"\";\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.state = {\n      modalShow: false,\n      count: 1,\n      productCards: [this.renderProductCards],\n      activeCategory: 0,\n      products: [this.renderProductCards],\n      // openPopup: false,\n      // activeCurrency: 0,\n      // selectedCurrency: \"$\",\n      // cartList: this.getCartFromLSn(),\n      activeAttributeItem: 0,\n      activeAttributeIndex: 0,\n      activeAttribute: \"\",\n      total: {\n        totalPrice: 0,\n        totalCount: 0\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.renderProductCards();\n    this.getCurrencies();\n    this.isMountedRef = /*#__PURE__*/React.createRef();\n    this.isMountedRef.current = fetchCategories();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.productCards !== this.props.productCards) {\n      this.renderProductCards();\n      this.getProductCards();\n    }\n  } // getCartFromLS = () => {\n  //   const data = localStorage.getItem(\"cart\");\n  //   return data ? JSON.parse(data) : [];\n  // };\n\n\n  render() {\n    console.log(this.props.productCards);\n    const totalPrice = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.prices[this.props.activeCurrency].amount * curr.count;\n    }, 0).toFixed(2);\n    const totalCount = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.count;\n    }, 0);\n    const {\n      productCards,\n      // activeCurrency,\n      cartList,\n      count,\n      // currencies,\n      activeCategory,\n      // selectedCurrency,\n      total,\n      // openPopup,\n      modalShow,\n      activeAttributeItem,\n      activeAttribute,\n      activeAttributeIndex\n    } = this.state;\n    const {\n      deleteCartItem,\n      countIncrease,\n      countDecrease,\n      onHidePopup,\n      onSelectAttribute,\n      getCartFromLS,\n      onSelectCategories,\n      // onOpenPopup,\n      // onSelectCurrencies,\n      toggleModal,\n      onAddToCart\n    } = this;\n    return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        totalCount,\n        modalShow,\n        totalPrice,\n        productCards,\n        // activeCurrency,\n        // currencies,\n        // openPopup,\n        activeAttributeIndex,\n        cartList,\n        count,\n        activeCategory,\n        // selectedCurrency,\n        total,\n        activeAttributeItem,\n        activeAttribute,\n        deleteCartItem,\n        countIncrease,\n        countDecrease,\n        onHidePopup,\n        onSelectAttribute,\n        getCartFromLS,\n        onSelectCategories,\n        // onOpenPopup,\n        // onSelectCurrencies,\n        toggleModal,\n        onAddToCart\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(Category, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cart\",\n            element: /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/:cardId\",\n            element: /*#__PURE__*/_jsxDEV(PDP, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          className: modalShow ? document.body.style.overflow = \"hidden\" : document.body.style.overflow = \"\",\n          close: toggleModal,\n          shown: modalShow,\n          children: /*#__PURE__*/_jsxDEV(CartOverlay, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this);\n  }\n\n} // export default App;\n\n\nconst mapStateToProps = state => ({\n  currencies: state.currencies.currencies,\n  productCards: state.categories.productCards,\n  activeCurrency: state.currencies.activeCurrency,\n  cartList: state.cartList.cartList // selectedCurrency: state.currencies.selectedCurrency,\n  // openPopup: state.currencies.openPopup,\n\n});\n\nconst mapDispatchToProps = {\n  fetchCategories,\n  setCurrencies,\n  setProductCards,\n  getCart,\n  onOpenPopup\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"names":["React","Route","Routes","Category","Header","Cart","PDP","AppContext","Modal","CartOverlay","fetchCategories","connect","onOpenPopup","setCurrencies","setProductCards","getCart","App","Component","constructor","props","renderProductCards","result","productCards","data","categories","console","log","setState","err","getProductCards","onSelectCategories","index","activeCategory","getCurrencies","currenciesList","state","products","prices","onSelectAttribute","attribute","el","activeAttributeIndex","activeAttribute","activeAttributeItem","items","onAddToCart","product","cartList","newProduct","isInCart","inStock","attributes","brand","gallery","id","name","count","forEach","localStorage","setItem","JSON","stringify","parse","getItem","arr","length","deleteCartItem","findIndex","x","splice","countIncrease","newProductChanged","countDecrease","toggleModal","modalShow","onHidePopup","document","body","style","overflow","total","totalPrice","totalCount","componentDidMount","isMountedRef","createRef","current","componentDidUpdate","prevProps","prevState","render","reduce","prev","curr","activeCurrency","amount","toFixed","getCartFromLS","mapStateToProps","currencies","mapDispatchToProps"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { Route, Routes } from \"react-router-dom\";\nimport Category from \"./pages/Category\";\nimport Header from \"./pages/Header\";\nimport Cart from \"./pages/Cart\";\nimport PDP from \"./pages/Pdp\";\n\nimport { AppContext } from \"./components/AppContext\";\nimport Modal from \"./components/Modal\";\nimport CartOverlay from \"./components/CartOverlay\";\n\nimport { fetchCategories } from \"./redux/fetchCategories\";\nimport { connect } from \"react-redux\";\nimport { onOpenPopup, setCurrencies } from \"./redux/currencies/slice\";\nimport { setProductCards} from \"./redux/categories/slice\";\nimport { getCart } from \"./redux/cartList/slice\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalShow: false,\n      count: 1,\n      productCards: [this.renderProductCards],\n      activeCategory: 0,\n      products: [this.renderProductCards],\n      // openPopup: false,\n      // activeCurrency: 0,\n      // selectedCurrency: \"$\",\n      // cartList: this.getCartFromLSn(),\n      activeAttributeItem: 0,\n      activeAttributeIndex: 0,\n      activeAttribute: \"\",\n      total: {\n        totalPrice: 0,\n        totalCount: 0,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.renderProductCards();\n    this.getCurrencies()\n\n    this.isMountedRef = React.createRef();\n    this.isMountedRef.current = fetchCategories();\n  }\n\n  renderProductCards = async () => {\n    // const isMounted = this.isMountedRef.current?.fetchCategories()\n  // if(isMounted) {\n    try {\n      const result = await fetchCategories();\n      const productCards = result.data.categories;\n      console.log(productCards)\n      // this.props.setProductCards(productCards)\n\n      this.setState({\n        productCards: productCards,\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  // }\n\n\n  };\n\n  getProductCards = () => {\n    this.renderProductCards()\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n    if(prevProps.productCards !== this.props.productCards) {\n      this.renderProductCards();\n      this.getProductCards()\n    }\n  }\n\n  // getCartFromLS = () => {\n  //   const data = localStorage.getItem(\"cart\");\n  //   return data ? JSON.parse(data) : [];\n  // };\n\n  onSelectCategories = (index) => {\n    this.setState({\n      activeCategory: index,\n    });\n  };\n  //\n  getCurrencies = async () => {\n    try {\n      const result = await fetchCategories();\n      const currenciesList =\n        result.data.categories[this.state.activeCategory].products[0].prices;\n      this.props.setCurrencies(currenciesList);\n      console.log(currenciesList)\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  // onSelectCurrencies = (index) => {\n  //   const { currencies } = this.props;\n  //   this.setState({\n  //     activeCurrency: index,\n  //     selectedCurrency: currencies[index].currency.symbol,\n  //     openPopup: false,\n  //   });\n  // };\n\n  // onOpenPopup = () => {\n  //   this.setState({ openPopup: !this.state.openPopup });\n  // };\n\n  onSelectAttribute = (attribute, el, index) => {\n    this.setState({\n      activeAttributeIndex: index,\n      activeAttribute: attribute,\n      activeAttributeItem: attribute.items[index],\n    });\n  };\n\n  onAddToCart = (product) => {\n    const {cartList} =this.props\n    const {\n      // cartList,\n      activeAttribute,\n      activeAttributeItem,\n      activeAttributeIndex,\n    } = this.state;\n    let newProduct;\n\n    if (!product.isInCart && product.inStock) {\n      newProduct = {\n        attributes: product.attributes,\n        activeAttribute: activeAttribute,\n        activeAttributeItem: activeAttributeItem,\n        activeAttributeIndex: activeAttributeIndex,\n        brand: product.brand,\n        prices: product.prices,\n        gallery: product.gallery,\n        id: product.id,\n        inStock: product.inStock,\n        name: product.name,\n        count: 1,\n        isInCart: false,\n      };\n    }\n\n    cartList.forEach((el) => {\n      if (el.id === newProduct.id) {\n        newProduct.isInCart = true;\n      }\n    });\n\n    if (!newProduct.isInCart && newProduct.inStock) {\n      newProduct.isInCart = true;\n      localStorage.setItem(\"cart\", JSON.stringify([...cartList, newProduct]));\n      this.props.getCart(JSON.parse(localStorage.getItem(\"cart\")))\n      // this.setState({\n      //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n      // });\n    } else if (newProduct.isInCart) {\n      cartList.forEach((el, index, arr) => {\n        if (el.activeAttributeItem.id !== newProduct.activeAttributeItem.id) {\n          localStorage.setItem(\n            \"cart\",\n            JSON.stringify([...cartList, newProduct])\n          );\n          this.props.getCart(JSON.parse(localStorage.getItem(\"cart\")))\n          // this.setState({\n          //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n          // });\n        } else if (\n          el.activeAttributeItem.id === newProduct.activeAttributeItem.id\n        ) {\n          this.setState({\n            count: ++newProduct.count,\n          });\n          newProduct = { ...newProduct, count: ++el.count };\n          localStorage.setItem(\"cart\", JSON.stringify(cartList));\n          this.props.getCart(JSON.parse(localStorage.getItem(\"cart\")))\n          // this.setState({\n          //   cartList: JSON.parse(localStorage.getItem(\"cart\")),\n          // });\n          arr.length = index + 1;\n        }\n      });\n    }\n  };\n\n  deleteCartItem = (product, id) => {\n    const { cartList } = this.state;\n    const index = cartList.findIndex(\n      (x) =>\n        x.id === id &&\n        x.activeAttributeItem.id === product.activeAttributeItem.id\n    );\n    cartList.splice(index, 1);\n    localStorage.setItem(\"cart\", JSON.stringify(cartList));\n  };\n\n  countIncrease = (product, id) => {\n    const { cartList } = this.state;\n\n    if (product.id === id) {\n      this.setState({\n        count: ++product.count,\n      });\n    }\n\n    let newProductChanged = { ...product, count: ++this.state.count };\n\n    cartList.forEach((el) => {\n      if (el.id === product.id) {\n        product = newProductChanged;\n      }\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(cartList));\n  };\n\n  countDecrease = (product, id) => {\n    const { cartList } = this.state;\n\n    if (product.id === id) {\n      this.setState({\n        count:\n          product.count - 1 > 0\n            ? --product.count\n            : this.deleteCartItem(product, id),\n      });\n    }\n\n    let newProductChanged = { ...product, count: --this.state.count };\n\n    cartList.forEach((el) => {\n      if (el.id === product.id) {\n        product = newProductChanged;\n      }\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(cartList));\n  };\n\n  toggleModal = () => {\n    this.setState({\n      modalShow: !this.state.modalShow,\n    });\n  };\n\n  onHidePopup = () => {\n    document.body.style.overflow = \"\";\n    this.setState({\n      modalShow: false,\n    });\n  };\n\n  render() {\n\n    console.log(this.props.productCards)\n\n    const totalPrice = this.props.cartList\n      .reduce((prev, curr) => {\n        return (\n          prev + curr.prices[this.props.activeCurrency].amount * curr.count\n        );\n      }, 0)\n      .toFixed(2);\n\n    const totalCount = this.props.cartList.reduce((prev, curr) => {\n      return prev + curr.count;\n    }, 0);\n\n    const {\n      productCards,\n      // activeCurrency,\n      cartList,\n      count,\n      // currencies,\n      activeCategory,\n      // selectedCurrency,\n      total,\n      // openPopup,\n      modalShow,\n      activeAttributeItem,\n      activeAttribute,\n      activeAttributeIndex,\n    } = this.state;\n\n    const {\n      deleteCartItem,\n      countIncrease,\n      countDecrease,\n      onHidePopup,\n      onSelectAttribute,\n      getCartFromLS,\n      onSelectCategories,\n      // onOpenPopup,\n      // onSelectCurrencies,\n      toggleModal,\n      onAddToCart,\n    } = this;\n\n    return (\n      <AppContext.Provider\n        value={{\n          totalCount,\n          modalShow,\n          totalPrice,\n          productCards,\n          // activeCurrency,\n          // currencies,\n          // openPopup,\n          activeAttributeIndex,\n          cartList,\n          count,\n          activeCategory,\n          // selectedCurrency,\n          total,\n          activeAttributeItem,\n          activeAttribute,\n          deleteCartItem,\n          countIncrease,\n          countDecrease,\n          onHidePopup,\n          onSelectAttribute,\n          getCartFromLS,\n          onSelectCategories,\n          // onOpenPopup,\n          // onSelectCurrencies,\n          toggleModal,\n          onAddToCart,\n        }}\n      >\n        <div>\n          <Header />\n          <Routes>\n            <Route path=\"/\" element={<Category />} />\n            <Route\n              path=\"/cart\"\n              element={\n                <Cart />\n              }\n            />\n            <Route\n              path=\"/:cardId\"\n              element={<PDP />}\n            />\n          </Routes>\n          <Modal\n            className={\n              modalShow\n                ? (document.body.style.overflow = \"hidden\")\n                : (document.body.style.overflow = \"\")\n            }\n            close={toggleModal}\n            shown={modalShow}\n          >\n            <CartOverlay />\n          </Modal>\n        </div>\n      </AppContext.Provider>\n    );\n  }\n}\n\n// export default App;\n\nconst mapStateToProps = (state) => ({\n  currencies: state.currencies.currencies,\n  productCards: state.categories.productCards,\n  activeCurrency: state.currencies.activeCurrency,\n  cartList: state.cartList.cartList\n  // selectedCurrency: state.currencies.selectedCurrency,\n  // openPopup: state.currencies.openPopup,\n});\nconst mapDispatchToProps = { fetchCategories, setCurrencies, setProductCards, getCart, onOpenPopup };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}