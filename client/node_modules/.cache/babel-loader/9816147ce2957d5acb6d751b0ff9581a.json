{"ast":null,"code":"import _classCallCheck from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Link}from\"react-router-dom\";import styles from\"./CartOverlay.module.css\";import CartOverlayItem from\"../CartOverlayItem\";import Title from\"../Title\";import Button from\"../Button\";import{AppContext}from\"../AppContext\";import{connect}from\"react-redux\";import{setModalShow}from\"../../redux/modal/slice\";import{actionsRef,separatorRef,basketRef}from\"../Actions\";import{currenciesRef}from\"../Currencies\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartOverlay=/*#__PURE__*/function(_React$PureComponent){_inherits(CartOverlay,_React$PureComponent);var _super=_createSuper(CartOverlay);function CartOverlay(props){var _this;_classCallCheck(this,CartOverlay);_this=_super.call(this,props);_this.handleClickOutside=function(_ref){var target=_ref.target;if(currenciesRef.current&&currenciesRef.current.contains(target)&&_this.props.modalShow){_this.props.setModalShow(true);}else if(_this.modalRef.current&&!_this.modalRef.current.contains(target)&&actionsRef.current&&!actionsRef.current.contains(target)&&separatorRef.current&&!separatorRef.current.contains(target)&&basketRef.current&&!basketRef.current.contains(target)){_this.props.setModalShow(false);}};_this.modalRef=/*#__PURE__*/React.createRef();return _this;}_createClass(CartOverlay,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener(\"mousedown\",this.handleClickOutside);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener(\"mousedown\",this.handleClickOutside);}},{key:\"render\",value:function render(){var _cartList$;var _this$context=this.context,totalCount=_this$context.totalCount,totalPrice=_this$context.totalPrice,onHidePopup=_this$context.onHidePopup;var _this$props=this.props,activeCurrency=_this$props.activeCurrency,cartList=_this$props.cartList;var symbol=(_cartList$=cartList[0])===null||_cartList$===void 0?void 0:_cartList$.prices[activeCurrency].currency.symbol;return/*#__PURE__*/_jsx(\"div\",{ref:this.modalRef,children:/*#__PURE__*/_jsxs(\"main\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"header\",{className:styles.header,children:[/*#__PURE__*/_jsx(Title,{className:styles.title,children:\"My Bag,\"}),/*#__PURE__*/_jsxs(\"span\",{className:styles.totalCount,children:[totalCount,\" items\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.content,children:cartList&&cartList.map(function(cartItem,id){return/*#__PURE__*/_jsx(CartOverlayItem,{cartItem:cartItem,id:id},id);})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.total,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.totalName,children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:styles.totalPrice,children:[symbol,totalPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.groupButton,children:[/*#__PURE__*/_jsx(Link,{to:\"/cart\",children:/*#__PURE__*/_jsx(Button,{className:styles.buttonViewBag,onClick:onHidePopup,children:\"VIEW BAG\"})}),/*#__PURE__*/_jsx(Button,{className:styles.buttonCheckOut,children:\"CHECK OUT\"})]})]})});}}]);return CartOverlay;}(React.PureComponent);CartOverlay.contextType=AppContext;var mapStateToProps=function mapStateToProps(state){return{activeCurrency:state.currencies.activeCurrency,cartList:state.cartList.cartList,modalShow:state.modal.modalShow};};var mapDispatchToProps={setModalShow:setModalShow};export default connect(mapStateToProps,mapDispatchToProps)(CartOverlay);","map":{"version":3,"names":["React","Link","styles","CartOverlayItem","Title","Button","AppContext","connect","setModalShow","actionsRef","separatorRef","basketRef","currenciesRef","CartOverlay","props","handleClickOutside","target","current","contains","modalShow","modalRef","createRef","document","addEventListener","removeEventListener","context","totalCount","totalPrice","onHidePopup","activeCurrency","cartList","symbol","prices","currency","container","header","title","content","map","cartItem","id","total","totalName","groupButton","buttonViewBag","buttonCheckOut","PureComponent","contextType","mapStateToProps","state","currencies","modal","mapDispatchToProps"],"sources":["D:/Downloads/Computer-science/MyProject/Entry_React_Developer_Test_Ivanov_Roman/client/src/components/CartOverlay/index.jsx"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./CartOverlay.module.css\";\nimport CartOverlayItem from \"../CartOverlayItem\";\nimport Title from \"../Title\";\nimport Button from \"../Button\";\nimport { AppContext } from \"../AppContext\";\n\nimport { connect } from \"react-redux\";\nimport { setModalShow } from \"../../redux/modal/slice\";\n\nimport { actionsRef, separatorRef, basketRef } from \"../Actions\";\nimport { currenciesRef } from \"../Currencies\";\n\nclass CartOverlay extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.modalRef = React.createRef();\n  }\n\n  handleClickOutside = ({ target }) => {\n    if (\n      currenciesRef.current &&\n      currenciesRef.current.contains(target) &&\n      this.props.modalShow\n    ) {\n      this.props.setModalShow(true);\n    } else if (\n      this.modalRef.current &&\n      !this.modalRef.current.contains(target) &&\n      actionsRef.current &&\n      !actionsRef.current.contains(target) &&\n      separatorRef.current &&\n      !separatorRef.current.contains(target) &&\n      basketRef.current &&\n      !basketRef.current.contains(target)\n    ) {\n      this.props.setModalShow(false);\n    }\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  render() {\n    const { totalCount, totalPrice, onHidePopup } = this.context;\n    const { activeCurrency, cartList } = this.props;\n    const symbol = cartList[0]?.prices[activeCurrency].currency.symbol;\n    return (\n      <div ref={this.modalRef}>\n        <main  className={ styles.container }>\n          <header className={styles.header}>\n            <Title className={styles.title}>My Bag,</Title>\n            <span className={styles.totalCount}>{totalCount} items</span>\n          </header>\n          <div className={styles.content}>\n            {cartList &&\n              cartList.map((cartItem, id) => (\n                <CartOverlayItem cartItem={cartItem} key={id} id={id} />\n              ))}\n          </div>\n          <div className={styles.total}>\n            <span className={styles.totalName}>Total</span>\n            <span className={styles.totalPrice}>\n              {symbol}\n              {totalPrice}\n            </span>\n          </div>\n          <div className={styles.groupButton}>\n            <Link to=\"/cart\">\n              <Button className={styles.buttonViewBag} onClick={onHidePopup}>\n                VIEW BAG\n              </Button>\n            </Link>\n            <Button className={styles.buttonCheckOut}>CHECK OUT</Button>\n          </div>\n        </main>\n      </div>\n    );\n  }\n}\n\nCartOverlay.contextType = AppContext;\n\nconst mapStateToProps = (state) => ({\n  activeCurrency: state.currencies.activeCurrency,\n  cartList: state.cartList.cartList,\n  modalShow: state.modal.modalShow,\n});\n\nconst mapDispatchToProps = { setModalShow };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartOverlay);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}